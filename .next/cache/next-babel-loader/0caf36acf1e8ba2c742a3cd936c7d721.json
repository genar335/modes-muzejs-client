{"ast":null,"code":"var _jsxFileName = \"/Users/yberfox/Documents/personal-projects/modes-muzejs-client/components/EmailDownloadBtn.tsx\";\nvar __jsx = React.createElement;\nimport Axios from \"axios\";\nimport React from \"react\";\nimport emailIcon from \"../GAssets/download-email.png\";\nimport { productionURL } from \"./constants\";\nimport style from \"./styles/EmailDownloadBtn.module.scss\";\nexport const EmailDownloadBtn = () => {\n  const handleClick = async () => {\n    try {\n      const emails = await (await Axios.get(`${productionURL}tests/allEmails`)).data;\n      const csvContent = \"data:text/csv;charset=utf-8,\";\n      const headers = \"Email,Created at,Updated at\\n\";\n      const emailStr = emails.map(email => [email.email, new Date(email.createdAt).toLocaleDateString(), new Date(email.updatedAt).toLocaleDateString()].join(\",\")).join(\",\\n\\r\");\n      console.log(emailStr);\n      const encodedUri = encodeURI(`${csvContent}${headers}${emailStr}`); // window.open(encodedUri);\n\n      const a = document.createElement(\"a\");\n      a.href = encodedUri;\n      a.style.display = 'none';\n      a.download = 'Emails';\n      document.body.appendChild(a);\n      a.click();\n      a.parentNode.removeChild(a);\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  return __jsx(\"button\", {\n    className: style.dButton,\n    onClick: handleClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 9\n    }\n  }, __jsx(\"img\", {\n    src: emailIcon,\n    alt: \"Icon showing a mail with an arrow\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 13\n    }\n  }));\n};","map":{"version":3,"sources":["/Users/yberfox/Documents/personal-projects/modes-muzejs-client/components/EmailDownloadBtn.tsx"],"names":["Axios","React","emailIcon","productionURL","style","EmailDownloadBtn","handleClick","emails","get","data","csvContent","headers","emailStr","map","email","Date","createdAt","toLocaleDateString","updatedAt","join","console","log","encodedUri","encodeURI","a","document","createElement","href","display","download","body","appendChild","click","parentNode","removeChild","error","dButton"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,SAAP,MAAsB,+BAAtB;AACA,SAAQC,aAAR,QAA4B,aAA5B;AAEA,OAAOC,KAAP,MAAkB,uCAAlB;AAUA,OAAO,MAAMC,gBAAgB,GAAG,MAAM;AAClC,QAAMC,WAAW,GAAG,YAAY;AAC5B,QAAI;AACA,YAAMC,MAAkB,GAAG,MAAM,CAC7B,MAAMP,KAAK,CAACQ,GAAN,CAAW,GAAEL,aAAc,iBAA3B,CADuB,EAE/BM,IAFF;AAIA,YAAMC,UAAU,GAAG,8BAAnB;AACA,YAAMC,OAAO,GAAG,+BAAhB;AACA,YAAMC,QAAQ,GAAGL,MAAM,CAClBM,GADY,CACPC,KAAD,IACD,CACIA,KAAK,CAACA,KADV,EAEI,IAAIC,IAAJ,CAASD,KAAK,CAACE,SAAf,EAA0BC,kBAA1B,EAFJ,EAGI,IAAIF,IAAJ,CAASD,KAAK,CAACI,SAAf,EAA0BD,kBAA1B,EAHJ,EAIEE,IAJF,CAIO,GAJP,CAFS,EAQZA,IARY,CAQP,OARO,CAAjB;AASAC,MAAAA,OAAO,CAACC,GAAR,CAAYT,QAAZ;AACA,YAAMU,UAAU,GAAGC,SAAS,CAAE,GAAEb,UAAW,GAAEC,OAAQ,GAAEC,QAAS,EAApC,CAA5B,CAjBA,CAkBA;;AACA,YAAMY,CAAC,GAAGC,QAAQ,CAACC,aAAT,CAAuB,GAAvB,CAAV;AACAF,MAAAA,CAAC,CAACG,IAAF,GAASL,UAAT;AACAE,MAAAA,CAAC,CAACpB,KAAF,CAAQwB,OAAR,GAAkB,MAAlB;AACAJ,MAAAA,CAAC,CAACK,QAAF,GAAa,QAAb;AACAJ,MAAAA,QAAQ,CAACK,IAAT,CAAcC,WAAd,CAA0BP,CAA1B;AACAA,MAAAA,CAAC,CAACQ,KAAF;AACAR,MAAAA,CAAC,CAACS,UAAF,CAAcC,WAAd,CAA0BV,CAA1B;AACH,KA1BD,CA0BE,OAAOW,KAAP,EAAc;AACZf,MAAAA,OAAO,CAACe,KAAR,CAAcA,KAAd;AACH;AACJ,GA9BD;;AA+BA,SACI;AAAQ,IAAA,SAAS,EAAE/B,KAAK,CAACgC,OAAzB;AAAkC,IAAA,OAAO,EAAE9B,WAA3C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAK,IAAA,GAAG,EAAEJ,SAAV;AAAqB,IAAA,GAAG,EAAC,mCAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,CADJ;AAKH,CArCM","sourcesContent":["import Axios from \"axios\";\nimport React from \"react\";\nimport emailIcon from \"../GAssets/download-email.png\";\nimport {productionURL} from \"./constants\";\n\nimport style from \"./styles/EmailDownloadBtn.module.scss\";\n\ntype EmailObj = {\n    createdAt: string;\n    email: string;\n    updatedAt: string;\n    __v: number;\n    _id: string;\n};\n\nexport const EmailDownloadBtn = () => {\n    const handleClick = async () => {\n        try {\n            const emails: EmailObj[] = await (\n                await Axios.get(`${productionURL}tests/allEmails`)\n            ).data;\n\n            const csvContent = \"data:text/csv;charset=utf-8,\";\n            const headers = \"Email,Created at,Updated at\\n\";\n            const emailStr = emails\n                .map((email) =>\n                    [\n                        email.email,\n                        new Date(email.createdAt).toLocaleDateString(),\n                        new Date(email.updatedAt).toLocaleDateString(),\n                    ].join(\",\")\n                )\n                .join(\",\\n\\r\");\n            console.log(emailStr);\n            const encodedUri = encodeURI(`${csvContent}${headers}${emailStr}`);\n            // window.open(encodedUri);\n            const a = document.createElement(\"a\")\n            a.href = encodedUri\n            a.style.display = 'none'\n            a.download = 'Emails'\n            document.body.appendChild(a)\n            a.click()\n            a.parentNode!.removeChild(a)\n        } catch (error) {\n            console.error(error);\n        }\n    };\n    return (\n        <button className={style.dButton} onClick={handleClick}>\n            <img src={emailIcon} alt=\"Icon showing a mail with an arrow\"/>\n        </button>\n    );\n};\n"]},"metadata":{},"sourceType":"module"}