{"ast":null,"code":"var _jsxFileName = \"/Users/yberfox/Documents/personal-projects/modes-muzejs-client/components/TestCard.tsx\";\nvar __jsx = React.createElement;\nimport React, { useEffect, useState } from \"react\";\nimport styles from \"./styles/TestCard.module.scss\";\nimport Switch from \"react-switch\";\nimport Axios from \"axios\"; //const jwt = document.cookie.slice(document.cookie.indexOf('=') + 1);\n\nimport { productionURL } from \"./constants\";\nimport { useRouter } from \"next/router\";\nimport { AnimatePresence, motion, useAnimation } from \"framer-motion\";\n\nconst TestCard = props => {\n  useEffect(() => {// Axios.defaults.headers.common[\"Authorization\"] =\n    //   \"Bearer \" + store.get(\"jwt\");\n  }, []);\n  const CardStyle = {\n    color: props.colour === \"brown\" ? \"#FFFFFF\" : \"#2F4858\",\n    backgroundColor: props.colour === \"brown\" ? \"rgb(224\t188\t163\t)\" : \"#ffffff\"\n  };\n  const {\n    0: isDCModalOpen,\n    1: setIsDCModalOpen\n  } = useState(false);\n  const router = useRouter();\n\n  const forwardToTestEdit = testID => {\n    router.push(`/tms/create_test?testToEdit=${testID}`);\n  }; // console.log(props, \"card props\");\n\n\n  const {\n    0: isTestActive,\n    1: setIsTestActive\n  } = useState(props.active);\n  useEffect(() => {\n    setIsTestActive(props.active);\n  }, []); // const [switchIsActive, setSwichIsActive] = useState<boolean>(props.active);\n\n  const changeTestState = async (testID, isActive) => {\n    let changedTest;\n\n    try {\n      const responseFromServer = await Axios.post(`${productionURL}tests/toggleTestActiveState`, {\n        testID,\n        isActive\n      });\n      changedTest = responseFromServer.data; // setSwichIsActive(!switchIsActive);\n      // setIsTestActive(changedTest.active);\n\n      console.log(changedTest, \"recieved a response\");\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  const handleActiveChange = async () => {\n    // setSwichIsActive(!switchIsActive);\n    await changeTestState(props._id, !isTestActive);\n    console.log(\"Calling all tests\");\n    setTimeout(() => {\n      props.updateTests(props._id);\n    }, 200);\n  };\n\n  const handleEditIconClick = async () => {\n    // playClick();\n    forwardToTestEdit(props._id);\n  };\n\n  const handleDeleteIconClick = async () => {\n    Axios.get(`${productionURL}tests/deleteTestByID?testToDelete=${props._id}`).catch(error => alert(error)).then(response => {\n      console.log(response);\n      props.fetchAllTests();\n    });\n    setIsDCModalOpen(false);\n  };\n\n  const cardControls = useAnimation();\n  return __jsx(AnimatePresence, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 9\n    }\n  }, __jsx(motion.div, {\n    initial: {\n      opacity: 0\n    },\n    animate: {\n      opacity: 1\n    },\n    exit: {\n      opacity: 0\n    },\n    className: styles.TestCardBackground,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 13\n    }\n  }, __jsx(\"button\", {\n    className: styles.DeleteIcon,\n    onClick: _ => setIsDCModalOpen(true),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 17\n    }\n  }, DeleteIcon()), __jsx(\"button\", {\n    onClick: handleEditIconClick,\n    className: styles.EditIcon,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 17\n    }\n  }, EditIcon()), __jsx(\"div\", {\n    key: props._id,\n    id: props._id,\n    className: styles.TestCard,\n    style: CardStyle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 17\n    }\n  }, isDCModalOpen && __jsx(DeletionConfirmationModal, {\n    isVisible: isDCModalOpen,\n    toggleModal: setIsDCModalOpen,\n    deletionOfTest: handleDeleteIconClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 25\n    }\n  }), __jsx(\"div\", {\n    className: styles.ToggleTTContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 21\n    }\n  }, __jsx(Switch, {\n    id: \"activationToggle\",\n    onChange: handleActiveChange,\n    checked: props.active,\n    onColor: \"#0AB496\",\n    offColor: \"#8A8A8A\",\n    uncheckedIcon: false,\n    checkedIcon: false,\n    handleDiameter: 18,\n    width: 46,\n    height: 30,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 25\n    }\n  }), __jsx(\"p\", {\n    className: styles.TestType,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 25\n    }\n  }, parseTestTypeValueToLabel(props.fullTest.type))), __jsx(\"p\", {\n    className: styles.CardHeader,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 21\n    }\n  }, \"\\\"\", props.nameInRu, \"\\\"\"), __jsx(\"p\", {\n    className: styles.TestLastEdit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 21\n    }\n  }, new Date(props.fullTest.updatedAt).toLocaleDateString().replaceAll(/\\//g, \".\")))));\n};\n\nexport function DeletionConfirmationModal(props) {\n  useEffect(() => {\n    // document.body.style.position = \"fixed\";\n    // document.body.style.top = `-${window.scrollY}px`;\n    document.body.style.overflow = \"hidden\";\n    return () => {\n      // document.body.style.position = \"\";\n      // document.body.style.top = \"\";\n      document.body.style.overflow = \"\";\n    };\n  }, []);\n  const BtnStyle = {\n    backgroundColor: \"#2f4858\",\n    color: \"#ffffff\",\n    borderColor: \"#2f4858\",\n    borderRadius: \"14px\",\n    borderStyle: \"solid\",\n    width: \"5rem\",\n    height: \"3rem\",\n    margin: \"0 1rem\",\n    fontSize: \"20px\"\n  };\n  return __jsx(\"div\", {\n    style: {\n      width: \"100%\",\n      height: \"100%\",\n      background: \"rgba(224, 188, 163, 0.6)\",\n      // opacity: 0.6,\n      position: \"fixed\",\n      top: 0,\n      left: 0,\n      zIndex: 10,\n      display: \"flex\",\n      justifyContent: \"center\",\n      alignItems: \"center\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    style: {\n      position: \"relative\",\n      width: \"35%\",\n      height: \"40%\",\n      backgroundColor: \"#ffffff\",\n      opacity: 1,\n      borderRadius: \"14px\",\n      zIndex: 11,\n      display: \"flex\",\n      flexDirection: \"column\",\n      justifyContent: \"center\",\n      alignItems: \"center\",\n      color: \"#2F4858\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 13\n    }\n  }, InfoIcon(), __jsx(\"p\", {\n    style: {\n      margin: \"2rem 0 0 0\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 17\n    }\n  }, \"\\u0425\\u043E\\u0442\\u0438\\u0442\\u0435 \\u043B\\u0438 \\u0432\\u044B \\u0443\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C \\u044D\\u0442\\u043E\\u0442 \\u0442\\u0435\\u0441\\u0442?\"), __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 17\n    }\n  }, \"\\u041E\\u043F\\u0435\\u0440\\u0430\\u0446\\u0438\\u044F \\u043D\\u0435\\u043E\\u0431\\u0440\\u0430\\u0442\\u0438\\u043C\\u0430.\"), __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 17\n    }\n  }, __jsx(\"button\", {\n    onClick: props.deletionOfTest,\n    style: BtnStyle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 21\n    }\n  }, \"\\u0414\\u0430\"), __jsx(\"button\", {\n    style: BtnStyle,\n    onClick: e => props.toggleModal(false),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 21\n    }\n  }, \"\\u041D\\u0435\\u0442\"))));\n}\nexport const EditIcon = () => __jsx(\"svg\", {\n  width: \"42\",\n  height: \"42\",\n  viewBox: \"0 0 42 42\",\n  fill: \"none\",\n  xmlns: \"http://www.w3.org/2000/svg\",\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 241,\n    columnNumber: 5\n  }\n}, __jsx(\"circle\", {\n  cx: \"21.1744\",\n  cy: \"20.8256\",\n  r: \"20.8256\",\n  fill: \"white\",\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 248,\n    columnNumber: 9\n  }\n}), __jsx(\"path\", {\n  d: \"M21.1738 0C9.67259 0 0.348755 9.32446 0.348755 20.8252C0.348755 32.3259 9.67259 41.6512 21.1738 41.6512C32.6751 41.6512 42 32.3265 42 20.8252C42 9.32391 32.6751 0 21.1738 0ZM31.0738 14.9868L29.0958 16.9648L25.0693 12.9387L23.5418 14.4662L27.5683 18.4926L17.6924 28.3676L13.6663 24.3418L12.1388 25.8693L16.1649 29.8955L15.1809 30.8795L15.1621 30.8608C15.053 31.0405 14.8756 31.1715 14.6648 31.2183L10.9102 32.0555C10.854 32.0681 10.7968 32.0742 10.7403 32.0742C10.5353 32.0742 10.3362 31.9936 10.1887 31.8456C9.99927 31.6569 9.92041 31.3844 9.97873 31.1232L10.8155 27.3697C10.8627 27.1591 10.9941 26.9813 11.1734 26.8724L11.1544 26.8534L27.0472 10.96C27.2802 10.7274 27.6587 10.7274 27.8917 10.9607L31.0741 14.1424C31.3071 14.3754 31.3071 14.7538 31.0738 14.9868Z\",\n  fill: \"#2F4858\",\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 249,\n    columnNumber: 9\n  }\n}));\nexport const InfoIcon = () => __jsx(\"svg\", {\n  width: \"94\",\n  height: \"94\",\n  viewBox: \"0 0 94 94\",\n  fill: \"none\",\n  xmlns: \"http://www.w3.org/2000/svg\",\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 257,\n    columnNumber: 5\n  }\n}, __jsx(\"circle\", {\n  cx: \"47\",\n  cy: \"47\",\n  r: \"47\",\n  fill: \"#E0BCA3\",\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 264,\n    columnNumber: 9\n  }\n}), __jsx(\"path\", {\n  d: \"M42.9794 37.8704H51.0206V70H42.9794V37.8704ZM47 33.3914C45.5223 33.3914 44.3196 32.8937 43.3918 31.8984C42.4639 30.903 42 29.6688 42 28.1957C42 26.7226 42.4639 25.4884 43.3918 24.493C44.3196 23.4977 45.5223 23 47 23C48.4777 23 49.6804 23.4778 50.6082 24.4333C51.5361 25.3888 52 26.5832 52 28.0165C52 29.5693 51.5361 30.8632 50.6082 31.8984C49.6804 32.8937 48.4777 33.3914 47 33.3914Z\",\n  fill: \"white\",\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 265,\n    columnNumber: 9\n  }\n}));\nexport const DeleteIcon = () => __jsx(\"svg\", {\n  width: \"42\",\n  height: \"42\",\n  viewBox: \"0 0 42 42\",\n  fill: \"none\",\n  xmlns: \"http://www.w3.org/2000/svg\",\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 273,\n    columnNumber: 5\n  }\n}, __jsx(\"circle\", {\n  cx: \"20.825\",\n  cy: \"20.825\",\n  r: \"20.825\",\n  fill: \"#2F4858\",\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 280,\n    columnNumber: 9\n  }\n}), __jsx(\"path\", {\n  d: \"M15.5874 20.4751L15.2388 20.8275L15.5882 21.1791L18.2817 23.8897L15.6016 26.5995L15.2539 26.9511L15.6016 27.3027L17.6159 29.3394L17.9714 29.6988L18.3269 29.3394L21 26.6366L23.6731 29.3394L24.0286 29.6988L24.3841 29.3394L26.3984 27.3027L26.7461 26.9511L26.3984 26.5995L23.7175 23.8889L26.3984 21.1783L26.7461 20.8267L26.3984 20.4751L24.3841 18.4384L24.0286 18.079L23.6731 18.4384L20.9992 21.142L18.3118 18.4376L17.9563 18.0798L17.6016 18.4384L15.5874 20.4751ZM25.6445 9.79604L25.7913 9.94444H26H30.5V11.8333H11.5V9.94444H16H16.2087L16.3555 9.79604L17.6373 8.5H24.3627L25.6445 9.79604ZM15.2857 33.5C13.9956 33.5 12.9286 32.4291 12.9286 31.1111V14.2778H29.0714V31.1111C29.0714 32.4291 28.0044 33.5 26.7143 33.5H15.2857Z\",\n  fill: \"white\",\n  stroke: \"white\",\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 281,\n    columnNumber: 9\n  }\n}));\nexport const parseTestTypeValueToLabel = testTypeToParse => {\n  switch (testTypeToParse) {\n    case \"PP\":\n      return \"Фото – Фото\";\n\n    case \"PT\":\n      return \"Фото – Текст\";\n\n    case \"TT\":\n      return \"Tекст – Текст\";\n\n    case \"TP\":\n      return \"Текст – Фото\";\n\n    default:\n      return \"Неизвестно\";\n  }\n};\nexport default TestCard;","map":{"version":3,"sources":["/Users/yberfox/Documents/personal-projects/modes-muzejs-client/components/TestCard.tsx"],"names":["React","useEffect","useState","styles","Switch","Axios","productionURL","useRouter","AnimatePresence","motion","useAnimation","TestCard","props","CardStyle","color","colour","backgroundColor","isDCModalOpen","setIsDCModalOpen","router","forwardToTestEdit","testID","push","isTestActive","setIsTestActive","active","changeTestState","isActive","changedTest","responseFromServer","post","data","console","log","error","handleActiveChange","_id","setTimeout","updateTests","handleEditIconClick","handleDeleteIconClick","get","catch","alert","then","response","fetchAllTests","cardControls","opacity","TestCardBackground","DeleteIcon","_","EditIcon","ToggleTTContainer","TestType","parseTestTypeValueToLabel","fullTest","type","CardHeader","nameInRu","TestLastEdit","Date","updatedAt","toLocaleDateString","replaceAll","DeletionConfirmationModal","document","body","style","overflow","BtnStyle","borderColor","borderRadius","borderStyle","width","height","margin","fontSize","background","position","top","left","zIndex","display","justifyContent","alignItems","flexDirection","InfoIcon","deletionOfTest","e","toggleModal","testTypeToParse"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from \"react\";\nimport styles from \"./styles/TestCard.module.scss\";\nimport Switch from \"react-switch\";\nimport Axios, {AxiosError} from \"axios\";\n//const jwt = document.cookie.slice(document.cookie.indexOf('=') + 1);\nimport {productionURL} from \"./constants\";\nimport {ITest, TTestTypes} from \"../@types/test\";\nimport {NextRouter, useRouter} from \"next/router\";\nimport {AnimatePresence, motion, useAnimation} from \"framer-motion\";\n\nconst TestCard = (props: {\n    iterator: number;\n    colour: string;\n    _id: string;\n    nameInRu: string;\n    active: boolean;\n    fullTest: ITest;\n    // parentComponentTestFetcher: () => Promise<void>;\n    // mainTestFetcher: () => Promise<void>;\n    updateTests: (testID: string) => void;\n    fetchAllTests: () => Promise<void>;\n}) => {\n    useEffect(() => {\n        // Axios.defaults.headers.common[\"Authorization\"] =\n        //   \"Bearer \" + store.get(\"jwt\");\n    }, []);\n    const CardStyle: React.CSSProperties = {\n        color: props.colour === \"brown\" ? \"#FFFFFF\" : \"#2F4858\",\n        backgroundColor: props.colour === \"brown\" ? \"rgb(224\t188\t163\t)\" : \"#ffffff\",\n    };\n\n    const [isDCModalOpen, setIsDCModalOpen] = useState<boolean>(false);\n\n    const router: NextRouter = useRouter();\n    const forwardToTestEdit = (testID: string) => {\n        router.push(`/tms/create_test?testToEdit=${testID}`);\n    };\n\n    // console.log(props, \"card props\");\n    const [isTestActive, setIsTestActive] = useState<boolean>(props.active);\n    useEffect(() => {\n        setIsTestActive(props.active);\n    }, []);\n\n    // const [switchIsActive, setSwichIsActive] = useState<boolean>(props.active);\n\n    const changeTestState = async (testID: string, isActive: boolean) => {\n        let changedTest: ITest;\n        try {\n            const responseFromServer = await Axios.post(\n                `${productionURL}tests/toggleTestActiveState`,\n                {\n                    testID,\n                    isActive,\n                }\n            );\n            changedTest = responseFromServer.data;\n            // setSwichIsActive(!switchIsActive);\n            // setIsTestActive(changedTest.active);\n            console.log(changedTest, \"recieved a response\");\n        } catch (error) {\n            console.error(error);\n        }\n    };\n\n    const handleActiveChange = async () => {\n        // setSwichIsActive(!switchIsActive);\n\n        await changeTestState(props._id, !isTestActive);\n        console.log(\"Calling all tests\");\n\n        setTimeout(() => {\n            props.updateTests(props._id);\n        }, 200);\n    };\n\n    const handleEditIconClick = async () => {\n        // playClick();\n        forwardToTestEdit(props._id);\n    };\n\n    const handleDeleteIconClick = async () => {\n        Axios.get(`${productionURL}tests/deleteTestByID?testToDelete=${props._id}`)\n            .catch((error: AxiosError) => alert(error))\n            .then((response) => {\n                console.log(response);\n                props.fetchAllTests();\n            });\n        setIsDCModalOpen(false);\n    };\n\n    const cardControls = useAnimation();\n\n    return (\n        <AnimatePresence>\n            <motion.div\n                initial={{opacity: 0}}\n                animate={{opacity: 1}}\n                exit={{opacity: 0}}\n                className={styles.TestCardBackground}\n            >\n                <button\n                    className={styles.DeleteIcon}\n                    onClick={(_) => setIsDCModalOpen(true)}\n                >\n                    {DeleteIcon()}\n                </button>\n                <button onClick={handleEditIconClick} className={styles.EditIcon}>\n                    {EditIcon()}\n                </button>\n                <div\n                    key={props._id}\n                    id={props._id}\n                    className={styles.TestCard}\n                    style={CardStyle}\n                >\n                    {isDCModalOpen && (\n                        <DeletionConfirmationModal\n                            isVisible={isDCModalOpen}\n                            toggleModal={setIsDCModalOpen}\n                            deletionOfTest={handleDeleteIconClick}\n                        />\n                    )}\n                    {/* <Switch isOn={isTestActive} handleToggle={handleActiveChange} /> */}\n                    {/* <Switch onChange={handleActiveChange} checked={isTestActive} /> */}\n                    <div className={styles.ToggleTTContainer}>\n                        <Switch\n                            id=\"activationToggle\"\n                            onChange={handleActiveChange}\n                            checked={props.active}\n                            onColor=\"#0AB496\"\n                            offColor=\"#8A8A8A\"\n                            uncheckedIcon={false}\n                            checkedIcon={false}\n                            handleDiameter={18}\n                            width={46}\n                            height={30}\n                        />\n                        <p className={styles.TestType}>\n                            {parseTestTypeValueToLabel(props.fullTest.type)}\n                        </p>\n                    </div>\n                    {/*\n      //! Need to figure out how to time the switch\n    */}\n                    <p className={styles.CardHeader}>\"{props.nameInRu}\"</p>\n                    <p className={styles.TestLastEdit}>\n                        {new Date(props.fullTest.updatedAt as string)\n                            .toLocaleDateString()\n                            .replaceAll(/\\//g, \".\")}\n                    </p>\n                </div>\n            </motion.div>\n        </AnimatePresence>\n    );\n};\n\nexport function DeletionConfirmationModal(props: {\n    isVisible: boolean;\n    toggleModal: (toggler: boolean) => void;\n    deletionOfTest: () => void;\n}) {\n    useEffect(() => {\n        // document.body.style.position = \"fixed\";\n        // document.body.style.top = `-${window.scrollY}px`;\n        document.body.style.overflow = \"hidden\";\n        return () => {\n            // document.body.style.position = \"\";\n            // document.body.style.top = \"\";\n            document.body.style.overflow = \"\";\n        };\n    }, []);\n\n    const BtnStyle: React.CSSProperties = {\n        backgroundColor: \"#2f4858\",\n        color: \"#ffffff\",\n        borderColor: \"#2f4858\",\n        borderRadius: \"14px\",\n        borderStyle: \"solid\",\n        width: \"5rem\",\n        height: \"3rem\",\n        margin: \"0 1rem\",\n        fontSize: \"20px\",\n    };\n\n    return (\n        <div\n            style={{\n                width: \"100%\",\n                height: \"100%\",\n                background: \"rgba(224, 188, 163, 0.6)\",\n                // opacity: 0.6,\n                position: \"fixed\",\n                top: 0,\n                left: 0,\n                zIndex: 10,\n                display: \"flex\",\n                justifyContent: \"center\",\n                alignItems: \"center\",\n            }}\n        >\n            <div\n                style={{\n                    position: \"relative\",\n                    width: \"35%\",\n                    height: \"40%\",\n                    backgroundColor: \"#ffffff\",\n                    opacity: 1,\n                    borderRadius: \"14px\",\n                    zIndex: 11,\n                    display: \"flex\",\n                    flexDirection: \"column\",\n                    justifyContent: \"center\",\n                    alignItems: \"center\",\n                    color: \"#2F4858\",\n                }}\n            >\n                {InfoIcon()}\n                <p\n                    style={{\n                        margin: \"2rem 0 0 0\",\n                    }}\n                >\n                    Хотите ли вы удалить этот тест?\n                </p>\n                <p>Операция необратима.</p>\n                <div>\n                    <button onClick={props.deletionOfTest} style={BtnStyle}>\n                        Да\n                    </button>\n                    <button style={BtnStyle} onClick={(e) => props.toggleModal(false)}>\n                        Нет\n                    </button>\n                </div>\n            </div>\n        </div>\n    );\n}\n\nexport const EditIcon = () => (\n    <svg\n        width=\"42\"\n        height=\"42\"\n        viewBox=\"0 0 42 42\"\n        fill=\"none\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n    >\n        <circle cx=\"21.1744\" cy=\"20.8256\" r=\"20.8256\" fill=\"white\"/>\n        <path\n            d=\"M21.1738 0C9.67259 0 0.348755 9.32446 0.348755 20.8252C0.348755 32.3259 9.67259 41.6512 21.1738 41.6512C32.6751 41.6512 42 32.3265 42 20.8252C42 9.32391 32.6751 0 21.1738 0ZM31.0738 14.9868L29.0958 16.9648L25.0693 12.9387L23.5418 14.4662L27.5683 18.4926L17.6924 28.3676L13.6663 24.3418L12.1388 25.8693L16.1649 29.8955L15.1809 30.8795L15.1621 30.8608C15.053 31.0405 14.8756 31.1715 14.6648 31.2183L10.9102 32.0555C10.854 32.0681 10.7968 32.0742 10.7403 32.0742C10.5353 32.0742 10.3362 31.9936 10.1887 31.8456C9.99927 31.6569 9.92041 31.3844 9.97873 31.1232L10.8155 27.3697C10.8627 27.1591 10.9941 26.9813 11.1734 26.8724L11.1544 26.8534L27.0472 10.96C27.2802 10.7274 27.6587 10.7274 27.8917 10.9607L31.0741 14.1424C31.3071 14.3754 31.3071 14.7538 31.0738 14.9868Z\"\n            fill=\"#2F4858\"\n        />\n    </svg>\n);\n\nexport const InfoIcon = () => (\n    <svg\n        width=\"94\"\n        height=\"94\"\n        viewBox=\"0 0 94 94\"\n        fill=\"none\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n    >\n        <circle cx=\"47\" cy=\"47\" r=\"47\" fill=\"#E0BCA3\"/>\n        <path\n            d=\"M42.9794 37.8704H51.0206V70H42.9794V37.8704ZM47 33.3914C45.5223 33.3914 44.3196 32.8937 43.3918 31.8984C42.4639 30.903 42 29.6688 42 28.1957C42 26.7226 42.4639 25.4884 43.3918 24.493C44.3196 23.4977 45.5223 23 47 23C48.4777 23 49.6804 23.4778 50.6082 24.4333C51.5361 25.3888 52 26.5832 52 28.0165C52 29.5693 51.5361 30.8632 50.6082 31.8984C49.6804 32.8937 48.4777 33.3914 47 33.3914Z\"\n            fill=\"white\"\n        />\n    </svg>\n);\n\nexport const DeleteIcon = () => (\n    <svg\n        width=\"42\"\n        height=\"42\"\n        viewBox=\"0 0 42 42\"\n        fill=\"none\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n    >\n        <circle cx=\"20.825\" cy=\"20.825\" r=\"20.825\" fill=\"#2F4858\"/>\n        <path\n            d=\"M15.5874 20.4751L15.2388 20.8275L15.5882 21.1791L18.2817 23.8897L15.6016 26.5995L15.2539 26.9511L15.6016 27.3027L17.6159 29.3394L17.9714 29.6988L18.3269 29.3394L21 26.6366L23.6731 29.3394L24.0286 29.6988L24.3841 29.3394L26.3984 27.3027L26.7461 26.9511L26.3984 26.5995L23.7175 23.8889L26.3984 21.1783L26.7461 20.8267L26.3984 20.4751L24.3841 18.4384L24.0286 18.079L23.6731 18.4384L20.9992 21.142L18.3118 18.4376L17.9563 18.0798L17.6016 18.4384L15.5874 20.4751ZM25.6445 9.79604L25.7913 9.94444H26H30.5V11.8333H11.5V9.94444H16H16.2087L16.3555 9.79604L17.6373 8.5H24.3627L25.6445 9.79604ZM15.2857 33.5C13.9956 33.5 12.9286 32.4291 12.9286 31.1111V14.2778H29.0714V31.1111C29.0714 32.4291 28.0044 33.5 26.7143 33.5H15.2857Z\"\n            fill=\"white\"\n            stroke=\"white\"\n        />\n    </svg>\n);\n\nexport const parseTestTypeValueToLabel = (\n    testTypeToParse: TTestTypes[\"type\"]\n) => {\n    switch (testTypeToParse) {\n        case \"PP\":\n            return \"Фото – Фото\";\n        case \"PT\":\n            return \"Фото – Текст\";\n        case \"TT\":\n            return \"Tекст – Текст\";\n        case \"TP\":\n            return \"Текст – Фото\";\n        default:\n            return \"Неизвестно\";\n    }\n};\n\nexport default TestCard;\n"]},"metadata":{},"sourceType":"module"}